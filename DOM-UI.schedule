# 虚拟化DOM标注界面实施进度

## 阶段1: 基础框架搭建

### 1.1 创建新入口按钮
- [x] 在现有界面（/pages/project/[id].vue）添加DOM标注入口按钮
- [x] 测试按钮显示与点击响应
- [x] 通知用户测试

### 1.2 路由设置
- [x] 创建新路由页面框架 （参考`/pages/project-annotation/[projectId]/[audioId]/index.vue`）
- [x] 测试路由跳转功能
- [x] 通知用户测试

### 1.3 基础Pinia状态创建
- [x] 创建基础状态仓库结构
- [x] 测试状态初始化与访问
- [x] 通知用户测试

### 1.4 页面骨架搭建
- [x] 创建页面基本布局结构
- [x] 添加工具栏占位区域
- [x] 添加波形区占位区域
- [x] 添加标注区占位区域
- [x] 测试页面基本渲染
- [x] 通知用户测试

## 阶段2: 音频加载与基础显示

### 2.1.1 数据加载
- [x] 加载音频，并打印元数据到控制台
- [x] 加载标注数据，并打印到控制台
- [x] 通知用户测试

### 2.1.2 基础显示
- [x] 根据音频元数据显示波形图（仅波形图采用Canvas）
- [x] 通知用户测试

### 2.1.3 基础显示标注
- [x] 根据标注数据显示标注区域
- [x] 通知用户测试

### 2.1.4 基础视图控制
- [ ] 实现基础视图控制
- [ ] 通知用户测试

### 2.2 基本播放控制
- [ ] 实现播放/暂停功能（进度条也使用DOM元素）
- [ ] 实现基础跳转功能（点击波形图相应位置）
- [ ] 添加最简化的播放控制按钮
- [ ] 测试播放控制功能
- [ ] 通知用户测试

### 2.3 时间显示组件
- [ ] 创建当前时间显示
- [ ] 创建总时长显示
- [ ] 实现时间格式化工具函数
- [ ] 测试时间显示正确性
- [ ] 通知用户测试

## 阶段3: 波形图基础实现

### 3.1 Canvas容器创建
- [ ] 设置波形图Canvas容器
- [ ] 实现Canvas尺寸响应式调整
- [ ] 测试Canvas渲染环境
- [ ] 通知用户测试

### 3.2 基础波形绘制
- [ ] 实现单通道基础波形绘制
- [ ] 添加波形颜色和样式
- [ ] 测试波形显示与音频数据匹配
- [ ] 通知用户测试

### 3.3 时间轴实现
- [ ] 创建基础时间刻度线
- [ ] 添加时间标签
- [ ] 测试时间轴与波形对齐
- [ ] 通知用户测试

## 阶段4: DOM标注区域基础实现

### 4.1 标注数据加载
- [ ] 复用标注数据获取逻辑
- [ ] 将标注数据适配到Pinia状态
- [ ] 测试标注数据正确加载
- [ ] 通知用户测试

### 4.2 标注区域基础渲染
- [ ] 创建标注区域容器
- [ ] 实现基础标注区域DOM渲染
- [ ] 实现时间到像素的映射计算
- [ ] 测试标注区域基本显示
- [ ] 通知用户测试

### 4.3 视口内标注过滤
- [ ] 实现可视区域计算
- [ ] 添加标注过滤逻辑
- [ ] 测试只显示视口内标注
- [ ] 通知用户测试

## 阶段5: 播放控制与指示器

### 5.1 播放指示器创建
- [ ] 实现播放位置指示器组件
- [ ] 添加指示器样式
- [ ] 测试指示器位置与当前播放时间同步
- [ ] 通知用户测试

### 5.2 时间点击跳转
- [ ] 实现波形区域点击跳转功能
- [ ] 实现时间轴点击跳转功能
- [ ] 测试点击跳转精确性
- [ ] 通知用户测试

### 5.3 自动滚动跟随
- [ ] 实现播放时自动滚动功能
- [ ] 添加跟随平滑过渡效果
- [ ] 测试播放过程中视图跟随
- [ ] 通知用户测试

## 阶段6: 交互与编辑功能

### 6.1 标注区域选择
- [ ] 实现标注点击选择功能
- [ ] 添加选中状态样式
- [ ] 实现多选功能
- [ ] 测试标注选择逻辑
- [ ] 通知用户测试

### 6.2 创建新标注
- [ ] 实现拖拽创建新标注
- [ ] 添加创建标注的视觉反馈
- [ ] 测试新标注创建和保存
- [ ] 通知用户测试

### 6.3 标注编辑功能
- [ ] 创建标注编辑对话框
- [ ] 实现标注文本编辑
- [ ] 实现标注时间范围微调
- [ ] 测试编辑功能与数据同步
- [ ] 通知用户测试

### 6.4 调整标注大小
- [ ] 实现标注边缘拖拽调整
- [ ] 添加拖拽过程中的视觉反馈
- [ ] 测试标注大小调整与时间同步
- [ ] 通知用户测试

### 6.5 删除标注功能
- [ ] 实现标注删除按钮
- [ ] 添加删除确认机制
- [ ] 测试删除功能与数据同步
- [ ] 通知用户测试

## 阶段7: 缩放与导航控制

### 7.1 缩放控制
- [ ] 实现鼠标滚轮缩放
- [ ] 添加缩放按钮控制
- [ ] 测试不同缩放级别下的显示效果
- [ ] 通知用户测试

### 7.2 时间范围控制
- [ ] 创建时间范围选择器
- [ ] 实现快速跳转到特定时间范围
- [ ] 测试时间范围选择与视图同步
- [ ] 通知用户测试

### 7.3 标注导航功能
- [ ] 实现跳到下一个标注功能
- [ ] 实现跳到上一个标注功能
- [ ] 测试导航功能效果
- [ ] 通知用户测试

### 7.4 视图范围优化
- [ ] 实现视图边界检查
- [ ] 优化滚动边界处理
- [ ] 测试边界情况下的视图行为
- [ ] 通知用户测试

## 阶段8: 高级标注功能

### 8.1 标注合并功能
- [ ] 实现选中多个标注后合并
- [ ] 添加合并操作的视觉反馈
- [ ] 测试合并功能与数据同步
- [ ] 通知用户测试

### 8.2 批量操作支持
- [ ] 实现批量删除功能
- [ ] 实现批量属性修改
- [ ] 测试批量操作效果
- [ ] 通知用户测试

### 8.3 标注搜索功能
- [ ] 创建标注搜索界面
- [ ] 实现按文本内容搜索
- [ ] 实现搜索结果导航
- [ ] 测试搜索功能准确性
- [ ] 通知用户测试

### 8.4 标注分类与过滤
- [ ] 实现标注颜色分类
- [ ] 添加标注类型筛选
- [ ] 测试分类显示与过滤功能
- [ ] 通知用户测试
    
## 阶段9: VueUse优化集成

### 9.1 响应式优化
- [ ] 集成useElementSize优化容器尺寸响应
- [ ] 集成useResizeObserver监控DOM尺寸变化
- [ ] 测试响应式行为优化效果
- [ ] 通知用户测试

### 9.2 交互体验优化
- [ ] 集成useDraggable改进拖拽体验
- [ ] 集成useMouseInElement优化鼠标交互
- [ ] 集成useSwipe添加触摸支持
- [ ] 测试交互体验改进效果
- [ ] 通知用户测试

### 9.3 性能优化
- [ ] 集成useRafFn优化动画性能
- [ ] 集成useDebounceFn/useThrottleFn控制高频事件
- [ ] 测试性能优化效果
- [ ] 通知用户测试

### 9.4 最终整合与测试
- [ ] 对所有组件进行最终整合
- [ ] 进行全面功能测试
- [ ] 性能测试与最后优化
- [ ] 与原Canvas界面进行对比测试
- [ ] 通知用户测试
